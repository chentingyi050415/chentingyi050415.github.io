<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>陈亭伊｜运营 / 策划 / 增长</title>

  <style>
    /* =========================================================
      ✅ Morandi / iOS18 COLOR TOKENS（严格仅使用以下色值）
      [BASE]
      --bg        #f8f9fa  （全局背景）
      --card      #ffffff  （卡片背景）
      --gray-1    #f1f1f3  （分割浅灰）
      --gray-2    #e5e5e7  （分割中浅灰）
      [TEXT]
      --text      #333333  （主文字）
      --text-2    #777777  （次文字）
      --text-3    #94a3b8  （弱文字）
      [ACCENT]
      --accent    #8da3b9  （莫兰迪蓝灰主强调）
      --accent-2  #a5a58d  （莫兰迪橄榄灰辅助点缀）
      ✅ 动效衍生色：仅允许以上颜色的透明度变体 rgba(...)
    ========================================================= */
    :root{
      /* ----- Color ----- */
      --bg: #f8f9fa;
      --card: #ffffff;
      --gray-1: #f1f1f3;
      --gray-2: #e5e5e7;

      --text: #333333;
      --text-2: #777777;
      --text-3: #94a3b8;

      --accent: #8da3b9;
      --accent-2: #a5a58d;

      /* ----- Corner / Spacing ----- */
      --r: 18px;                /* 卡片圆角必须 18px */
      --max: 960px;
      --pad: 22px;              /* 留白比例：整体>=30%（靠 padding/margin 实现） */

      /* ----- Shadow (哑光低透 0.03-0.07) ----- */
      --shadow-1: 0 1px 4px rgba(51,51,51,0.04);         /* base */
      --shadow-2: 0 10px 28px rgba(141,163,185,0.07);    /* hover（仍≤0.07） */
      --shadow-3: 0 2px 12px rgba(141,163,185,0.05);     /* 顶栏滚动阴影 */

      /* ----- Motion Curves (苹果弹性体系) ----- */
      --ease-in: cubic-bezier(0.2, 0, 0, 1);     /* 入场 */
      --ease-out: cubic-bezier(0, 0, 0.2, 1);    /* 离场 */
      --ease-ui: cubic-bezier(0.4, 0, 0.2, 1);   /* 交互 */

      /* ----- Motion Controls (一键调节方案) ----- */
      --dur-base: 0.4s;          /* 基础时长 */
      --dur-complex: 0.9s;       /* 复杂动效上限 */
      --dur-bounce: 0.15s;       /* 回弹段 ≤0.15s */
      --stagger-line: 0.07s;     /* 同批次逐行阶梯式入场 */
      --batch-gap: 0.2s;         /* 批次间隔 */

      --hover-lift: 5px;         /* hover 上浮强度 */
      --parallax-card: 3px;      /* 视差卡片幅度（桌面） */
      --parallax-text: 1px;      /* 视差文字幅度（桌面） */

      /* 交互焦点环 */
      --focus-ring: 0 0 0 2px rgba(141,163,185,0.55);
      --focus-ring-soft: 0 0 0 6px rgba(141,163,185,0.12);
    }

    /* =========================================================
      ✅ Base Reset / Layout
    ========================================================= */
    *{ box-sizing:border-box; margin:0; padding:0; }
    html, body{ height:100%; }
    body{
      font-family: -apple-system,BlinkMacSystemFont,"SF Pro Text","PingFang SC","Helvetica Neue","Noto Sans SC",Arial,sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.68;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;

      /* --- Global Load (影院级渐进对焦) --- */
      opacity: 0;
      transform: scale(1.03) translateZ(0);
      animation: fade-in-elastic-morandi 0.9s var(--ease-in) forwards;
      contain: layout paint;
    }

    a{ color: inherit; text-decoration:none; }
    a:hover{ text-decoration: underline; }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px 16px 80px;
    }

    /* =========================================================
      #morandi-animation — 动效代码集中区块（CSS）
    ========================================================= */

    /* ---------- 1) 全局加载：body opacity + 微缩放回弹 ---------- */
    @keyframes fade-in-elastic-morandi{
      0%   { opacity: 0; transform: scale(1.03) translateZ(0); }
      72%  { opacity: 1; transform: scale(1.01) translateZ(0); }
      100% { opacity: 1; transform: scale(1) translateZ(0); }
    }

    /* ---------- 2) 顶栏：透明→白(0.98) + 哑光阴影（用伪元素只动opacity） ---------- */
    header.topbar{
      position: sticky;
      top: 12px;
      z-index: 50;
      display:flex;
      justify-content:center;
      pointer-events:auto;
      margin: 10px 0 14px;
      contain: layout paint;
    }
    .topbar .bar{
      width: min(var(--max), 960px);
      display:flex;
      justify-content:center;
      gap: 10px;
      padding: 10px 10px;
      border-radius: 999px;
      position: relative;
      overflow:hidden;
      transform: translateZ(0);
      will-change: transform, opacity;
      contain: layout paint;
    }
    .topbar .bar::before{
      /* 背景层（不直接改背景色，改opacity） */
      content:"";
      position:absolute; inset:0;
      background: rgba(255,255,255,0.98); /* ✅ 允许：卡片白的透明度变体 */
      opacity: 0;
      transition: opacity 0.3s var(--ease-ui);
      will-change: opacity;
    }
    .topbar .bar::after{
      /* 阴影层（用opacity控制） */
      content:"";
      position:absolute; inset:0;
      box-shadow: var(--shadow-3);
      opacity: 0;
      transition: opacity 0.5s var(--ease-out);
      pointer-events:none;
    }
    .topbar.is-scrolled .bar::before{ opacity: 1; }
    .topbar.is-scrolled .bar::after{ opacity: 1; }

    .navlink{
      position: relative;
      z-index: 1;
      font-size: 13px;
      color: var(--text-2);
      padding: 8px 10px;
      border-radius: 999px;
      transition: color var(--dur-base) var(--ease-ui), transform var(--dur-base) var(--ease-ui);
      will-change: transform;
      outline: none;
      touch-action: manipulation;
    }
    .navlink:hover{
      color: var(--accent);
    }
    .navlink.is-active{
      color: var(--text);
    }
    .navlink.is-active::after{
      /* 极简指示（只用accent透明度变体） */
      content:"";
      position:absolute;
      left: 10px; right: 10px;
      bottom: 4px;
      height: 2px;
      border-radius: 999px;
      background: rgba(141,163,185,0.45);
      transform: scaleX(1);
      transform-origin: center;
    }
    .navlink:active{
      transform: scale(0.98) translateZ(0);
    }

    /* 无障碍焦点环（outline-offset 通过box-shadow模拟，避免layout） */
    .navlink:focus-visible,
    .chip:focus-visible,
    .pill:focus-visible,
    .toTop:focus-visible{
      box-shadow: var(--focus-ring), var(--focus-ring-soft);
    }

    /* ---------- 3) Card 基础 + 懒加载入场（3D轻抬+流体渐显） ---------- */
    .card{
      background: var(--card);
      border-radius: var(--r);
      box-shadow: var(--shadow-1);
      padding: var(--pad);
      margin: 14px 0;
      border: 1px solid rgba(229,229,231,0.85); /* ✅ gray-2透明度变体 */

      /* 初始：更强的入场空间感（rotateX 8deg） */
      opacity: 0;
      transform:
        translateY(16px)
        scale(0.90)
        rotateX(8deg)
        translateZ(0);
      transform-origin: center top;
      backface-visibility: hidden;
      will-change: transform, opacity;
      contain: layout paint;
      position: relative;
      overflow: hidden;
    }

    /* 流体遮罩层（模拟底部向上渐显遮罩：只动opacity/transform） */
    .card::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:-2px;
      height: 42%;
      background: linear-gradient(to top,
        rgba(255,255,255,1),
        rgba(255,255,255,0)
      );
      opacity: 0;
      transform: translateY(10px) translateZ(0);
      will-change: opacity, transform;
      pointer-events:none;
    }

    .card.is-in{
      animation: card-in-3d-morandi 0.6s var(--ease-in) forwards;
    }
    .card.is-in::after{
      animation: mask-rise-morandi 0.3s var(--ease-in) forwards;
    }

    @keyframes card-in-3d-morandi{
      0%   { opacity:0; transform: translateY(16px) scale(0.90) rotateX(8deg) translateZ(0); }
      82%  { opacity:1; transform: translateY(0) scale(1.02) rotateX(0deg) translateZ(0); } /* 轻回弹 */
      100% { opacity:1; transform: translateY(0) scale(1) rotateX(0deg) translateZ(0); }
    }
    @keyframes mask-rise-morandi{
      to{ opacity: 1; transform: translateY(0) translateZ(0); }
    }

    /* ---------- 4) 卡片 Hover（桌面端）+ 四重复合动效 ----------
      ① translateY(-5px)
      ② shadow变深（≤0.07）
      ③ 背景莫兰迪渐变微位移：用伪元素 transform 实现（不动bg-position）
      ④ 边框描边渐显
    ---------------------------------------------------------- */
    .card.hoverable{
      transition: transform 0.4s var(--ease-ui), box-shadow 0.5s var(--ease-ui), border-color 0.3s var(--ease-ui);
    }
    .card.hoverable::before{
      /* 背景细腻莫兰迪流光（仅使用灰阶 + accent透明度） */
      content:"";
      position:absolute; inset:-40px;
      background:
        radial-gradient(520px 220px at 20% 10%, rgba(141,163,185,0.10), transparent 55%),
        radial-gradient(520px 220px at 80% 30%, rgba(141,163,185,0.06), transparent 55%),
        linear-gradient(90deg, rgba(241,241,243,0.7), rgba(229,229,231,0.5), rgba(241,241,243,0.7));
      opacity: 0;
      transform: translateX(0) translateZ(0);
      will-change: transform, opacity;
      pointer-events:none;
    }

    /* hover只在桌面端启用：移动端会弱化 */
    @media (hover:hover) and (pointer:fine){
      .card.hoverable:hover{
        transform: translateY(calc(-1 * var(--hover-lift))) scale(1) translateZ(0);
        box-shadow: var(--shadow-2);
        border-color: rgba(141,163,185,0.25); /* 描边渐显（accent透明） */
      }
      .card.hoverable:hover::before{
        opacity: 1;
        animation: drift-bg-morandi 6s var(--ease-ui) infinite alternate;
      }
      @keyframes drift-bg-morandi{
        from{ transform: translateX(0) translateZ(0); }
        to  { transform: translateX(8%) translateZ(0); }
      }
    }

    /* 点击态：scale 0.98→1.01→1（0.3s）+ 背景微暗(伪层opacity瞬变) */
    .card.press{
      animation: press-elastic-morandi 0.3s var(--ease-ui) forwards;
    }
    @keyframes press-elastic-morandi{
      0%{ transform: translateY(0) scale(1) translateZ(0); }
      45%{ transform: translateY(0) scale(0.98) translateZ(0); }
      80%{ transform: translateY(0) scale(1.01) translateZ(0); }
      100%{ transform: translateY(0) scale(1) translateZ(0); }
    }

    /* ---------- 5) Hero（个人信息卡）影院级三段归位 + 头像位 ---------- */
    .hero{
      display:flex;
      gap: 18px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .heroLeft{
      min-width: 320px;
      flex: 1.2;
    }
    .heroRight{
      min-width: 280px;
      flex: 0.9;
      display:flex;
      flex-direction:column;
      gap: 10px;
      align-items:stretch;
    }

    /* 头像位 */
    .avatarWrap{
      display:flex;
      align-items:center;
      gap: 14px;
      margin-bottom: 10px;
    }
    .avatar{
      width: 56px;
      height: 56px;
      border-radius: 16px;
      object-fit: cover;
      background: var(--gray-1);
      border: 1px solid rgba(229,229,231,0.9);
      box-shadow: var(--shadow-1);

      /* 头像微妙呼吸（仅在非reduce-motion） */
      transform: translateZ(0);
      will-change: transform, opacity;
    }
    .avatarFallback{
      width: 56px;
      height: 56px;
      border-radius: 16px;
      background: var(--gray-1);
      border: 1px solid rgba(229,229,231,0.9);
      box-shadow: var(--shadow-1);
      display:flex;
      align-items:center;
      justify-content:center;
      color: var(--text-2);
      font-weight: 650;
      letter-spacing: 0.5px;
      user-select:none;
    }

    .name{
      font-size: 30px;
      font-weight: 750;
      letter-spacing: 0.2px;
      color: var(--text);
      display:inline-block;
      cursor: pointer;
      user-select:none;
      transform: translateZ(0);
      will-change: transform, filter;
    }
    .metaLine{
      margin-top: 8px;
      color: var(--text-2);
      font-size: 14px;
    }
    .metaLine .weak{ color: var(--text-3); }

    /* 求职意向标签（无限渐变循环：用伪层transform实现） */
    .chips{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
    }
    .chip{
      position: relative;
      display:inline-flex;
      align-items:center;
      padding: 7px 12px;
      font-size: 13px;
      border-radius: 999px;
      color: var(--text-2);
      border: 1px solid rgba(229,229,231,0.9);
      background: rgba(241,241,243,0.85);
      overflow:hidden;
      outline:none;

      transform: translateZ(0);
      will-change: transform, opacity;
      touch-action: manipulation;
    }
    .chip::before{
      content:"";
      position:absolute; inset:-12px;
      background: linear-gradient(90deg,
        rgba(241,241,243,1),
        rgba(229,229,231,1),
        rgba(241,241,243,1)
      );
      opacity: 0.9;
      transform: translateX(-12%) translateZ(0);
      will-change: transform, opacity;
      animation: chip-gradient-loop-morandi 12s linear infinite;
    }
    .chip > span{ position: relative; z-index: 1; }
    @keyframes chip-gradient-loop-morandi{
      from{ transform: translateX(-12%) translateZ(0); }
      to  { transform: translateX(12%) translateZ(0); }
    }

    @media (hover:hover) and (pointer:fine){
      .chip:hover::before{ animation-duration: 4.8s; } /* 提速 2.5x */
      .chip:hover{
        border-color: rgba(141,163,185,0.35);
        box-shadow: 0 0 6px rgba(141,163,185,0.18);
        color: var(--text);
      }
    }
    .chip:active{
      animation: press-elastic-morandi 0.3s var(--ease-ui) forwards;
    }

    /* Hero 的影院级入场：高斯模糊15px + translateY(-20px) + scale 0.97 → 三段归位(1.2s) */
    .heroCard{
      filter: blur(15px);
      opacity: 0;
      transform: translateY(-20px) scale(0.97) translateZ(0);
      animation: hero-focus-morandi 1.2s var(--ease-in) forwards;
    }
    @keyframes hero-focus-morandi{
      0%   { filter: blur(15px); opacity:0; transform: translateY(-20px) scale(0.97) translateZ(0); }
      35%  { filter: blur(8px);  opacity:1; transform: translateY(-6px)  scale(0.99) translateZ(0); }
      70%  { filter: blur(2px);  opacity:1; transform: translateY(0)     scale(1.00) translateZ(0); }
      88%  { filter: blur(0px);  opacity:1; transform: translateY(0)     scale(1.01) translateZ(0); } /* 弹性回弹 */
      100% { filter: blur(0px);  opacity:1; transform: translateY(0)     scale(1.00) translateZ(0); }
    }

    /* 批次入场：同批次逐行阶梯式入场（JS会给每行加 delay） */
    .stagger{
      opacity: 0;
      transform: translateY(10px) scale(0.98) translateZ(0);
      will-change: transform, opacity;
    }
    .stagger.is-in{
      animation: line-in-elastic-morandi var(--dur-base) var(--ease-in) forwards;
    }
    @keyframes line-in-elastic-morandi{
      0%   { opacity:0; transform: translateY(10px) scale(0.98) translateZ(0); }
      85%  { opacity:1; transform: translateY(0)    scale(1.02) translateZ(0); }
      100% { opacity:1; transform: translateY(0)    scale(1) translateZ(0); }
    }

    /* 信息 pill（右侧快捷） */
    .pill{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 12px 12px;
      border-radius: 16px;
      background: rgba(241,241,243,0.9);
      border: 1px solid rgba(229,229,231,0.95);
      color: var(--text-2);

      transform: translateZ(0);
      will-change: transform, opacity;
      transition: transform var(--dur-base) var(--ease-ui);
      outline:none;
      touch-action: manipulation;
    }
    .pill strong{ color: var(--text); font-weight: 650; }
    .pill:active{
      animation: press-elastic-morandi 0.3s var(--ease-ui) forwards;
    }
    @media (hover:hover) and (pointer:fine){
      .pill:hover{
        transform: translateY(-2px) translateZ(0);
      }
    }

    /* ---------- 6) Section Title：装饰线 scaleX 0→1 + 标题文字滑入 + letter-spacing 0.8→0 ---------- */
    .sectionTitle{
      display:flex;
      align-items:center;
      gap: 10px;
      margin-bottom: 14px;
    }
    .sectionBar{
      width: 12px; height: 12px;
      border-radius: 4px;
      background: rgba(141,163,185,0.0);
      transform: scaleX(0) translateZ(0);
      transform-origin: left center;
      will-change: transform, opacity;
    }
    .sectionTitle h2{
      font-size: 16px;
      font-weight: 750;
      color: var(--text);
      opacity: 0;
      transform: translateX(30px) translateZ(0);
      letter-spacing: 0.8px;
      will-change: transform, opacity;
    }

    .card.is-in .sectionBar{
      animation: bar-grow-morandi 0.8s var(--ease-in) forwards;
    }
    .card.is-in .sectionTitle h2{
      animation: title-slide-morandi 0.7s var(--ease-in) forwards;
    }

    @keyframes bar-grow-morandi{
      0%   { transform: scaleX(0) translateZ(0); background: rgba(141,163,185,0.0); }
      100% { transform: scaleX(1) translateZ(0); background: rgba(141,163,185,1); }
    }
    @keyframes title-slide-morandi{
      0%   { opacity:0; transform: translateX(30px) translateZ(0); letter-spacing: 0.8px; }
      100% { opacity:1; transform: translateX(0) translateZ(0); letter-spacing: 0px; }
    }

    /* 滚动高亮：进入视口时给标题一个柔光（用伪元素/opacity模拟，避免频繁paint） */
    .sectionTitle .glow{
      position:absolute;
      inset:-6px -10px -6px -10px;
      background: radial-gradient(closest-side, rgba(141,163,185,0.12), transparent 65%);
      opacity: 0;
      transform: translateZ(0);
      transition: opacity 0.4s var(--ease-ui);
      pointer-events:none;
    }
    .sectionTitleWrap{
      position: relative;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .sectionTitleWrap.is-hot .glow{ opacity: 1; }

    /* ---------- 7) Entry + list 逐行入场 ---------- */
    .entry{
      border-radius: 16px;
      background: var(--card);
      border: 1px solid rgba(229,229,231,0.9);
      padding: 14px 14px;
      box-shadow: var(--shadow-1);
      margin-bottom: 12px;

      opacity: 0;
      transform: translateY(10px) scale(0.98) translateZ(0);
      will-change: transform, opacity;
      contain: layout paint;
    }
    .entry.is-in{
      animation: entry-in-elastic-morandi 0.55s var(--ease-in) forwards;
    }
    @keyframes entry-in-elastic-morandi{
      0%   { opacity:0; transform: translateY(10px) scale(0.98) translateZ(0); }
      85%  { opacity:1; transform: translateY(0) scale(1.02) translateZ(0); }
      100% { opacity:1; transform: translateY(0) scale(1) translateZ(0); }
    }

    .row{
      display:grid;
      grid-template-columns: 1.25fr 0.85fr 0.5fr;
      gap: 12px;
      align-items: baseline;
    }
    .row .left{ font-weight: 700; color: var(--text); }
    .row .mid{ font-weight: 650; color: rgba(141,163,185,1); text-align:center; }
    .row .right{ color: var(--text-3); text-align:right; white-space:nowrap; }
    @media (max-width: 760px){
      .row{ grid-template-columns: 1fr; }
      .row .mid,.row .right{ text-align:left; }
    }
    .subline{
      margin-top: 8px;
      color: var(--text-2);
      font-size: 13.5px;
    }

    /* list item：入场 + hover 动效（下划线渐显） */
    ul.bullets{
      list-style:none;
      margin-top: 10px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      color: var(--text-2);
      font-size: 14px;
    }

    li.bullet{
      position: relative;
      padding-left: 18px;

      opacity: 0;
      transform: translateX(10px) translateZ(0);
      will-change: transform, opacity;
      contain: layout paint;
      color: var(--text-2);

      transition: color 0.25s var(--ease-ui), letter-spacing 0.35s var(--ease-ui), transform 0.2s var(--ease-ui);
    }
    li.bullet::before{
      content:"";
      position:absolute;
      left:0; top: 0.62em;
      width: 7px; height:7px;
      border-radius: 50%;

      /* 莫兰迪双态呼吸（颜色在accent-2 与 accent间切换） */
      background: rgba(165,165,141,0.85);
      transform: translateY(-50%) scale(1) translateZ(0);
      animation: dot-breath-dual-morandi 3s var(--ease-ui) infinite;
      will-change: transform, opacity;
    }
    @keyframes dot-breath-dual-morandi{
      0%,100%{ transform: translateY(-50%) scale(1) translateZ(0); background: rgba(165,165,141,0.85); }
      50%    { transform: translateY(-50%) scale(1.4) translateZ(0); background: rgba(141,163,185,0.9); }
    }

    /* 下划线：只用accent透明度，transform scaleX 做渐显 */
    li.bullet::after{
      content:"";
      position:absolute;
      left: 18px;
      right: 2px;
      bottom: -2px;
      height: 1px;
      background: rgba(141,163,185,0.35);
      transform: scaleX(0) translateZ(0);
      transform-origin: left center;
      opacity: 0;
      transition: transform 0.3s var(--ease-ui), opacity 0.3s var(--ease-ui);
      pointer-events:none;
    }

    li.bullet:hover{
      color: rgba(141,163,185,1);
      letter-spacing: 0.4px;
      transform: translateY(-1.5px) translateZ(0);
    }
    li.bullet:hover::after{
      transform: scaleX(1) translateZ(0);
      opacity: 1;
    }

    li.bullet.is-in{
      animation: bullet-in-morandi 0.55s var(--ease-in) forwards;
    }
    @keyframes bullet-in-morandi{
      0%{ opacity:0; transform: translateX(10px) translateZ(0); }
      100%{ opacity:1; transform: translateX(0) translateZ(0); }
    }

    /* ---------- 8) 数字：弹性计数 + 逐位弹动 + 颜色过渡 + 脉冲高光 ---------- */
    .num{
      display:inline-flex;
      gap: 1px;
      align-items:baseline;
      color: var(--text-2);
      font-weight: 750;
      will-change: transform, opacity;
      transform: translateZ(0);
    }
    .num .digit{
      display:inline-block;
      transform: translateZ(0);
      will-change: transform, opacity;
    }
    .num.is-counting{ color: rgba(141,163,185,1); }
    .digit.pop{
      animation: digit-pop-morandi 0.12s var(--ease-ui) both;
    }
    @keyframes digit-pop-morandi{
      0%{ transform: scale(1) translateZ(0); opacity: 0.92; }
      50%{ transform: scale(1.15) translateZ(0); opacity: 1; }
      100%{ transform: scale(1) translateZ(0); opacity: 1; }
    }
    /* 计数完成后脉冲高光（循环4次，每次0.4s） */
    .num.pulse{
      animation: pulse-highlight-morandi 0.4s var(--ease-ui) 0s 4;
    }
    @keyframes pulse-highlight-morandi{
      0%,100%{ text-shadow: 0 0 0 rgba(141,163,185,0); }
      50%{ text-shadow: 0 0 6px rgba(141,163,185,0.25); }
    }

    /* ---------- 9) 姓名彩蛋：五层动效（桌面端完整，移动端降级） ---------- */
    .name.pop{
      animation: name-five-layer-morandi 0.5s var(--ease-in) both;
    }
    @keyframes name-five-layer-morandi{
      0%{ transform: rotate(0deg) scale(1) translateZ(0); }
      45%{ transform: rotate(10deg) scale(1.12) translateZ(0); }
      100%{ transform: rotate(0deg) scale(1) translateZ(0); }
    }
    .name.stroke{
      -webkit-text-stroke: 1px rgba(141,163,185,0.95);
    }

    .ripple{
      position: absolute;
      border-radius: 999px;
      border: 2px solid rgba(141,163,185,0.18);
      opacity: 0;
      transform: translate(-50%,-50%) scale(0.6) translateZ(0);
      will-change: transform, opacity;
      pointer-events:none;
      animation: ripple-3ring-morandi 1.2s var(--ease-in) forwards;
      contain: layout paint;
    }
    @keyframes ripple-3ring-morandi{
      0%{ opacity: 0; transform: translate(-50%,-50%) scale(0.6) translateZ(0); }
      20%{ opacity: 1; }
      100%{ opacity: 0; transform: translate(-50%,-50%) scale(1.8) translateZ(0); }
    }
    /* Hero背景柔光闪：用伪元素 opacity 0.95→1（0.15s） */
    .flash{
      position:absolute; inset:0;
      background: rgba(141,163,185,0.06);
      opacity: 0;
      pointer-events:none;
      will-change: opacity;
      animation: hero-flash-morandi 0.15s var(--ease-ui) forwards;
    }
    @keyframes hero-flash-morandi{
      from{ opacity: 1; }
      to{ opacity: 0; }
    }
    /* 标签同步微振 */
    .chips.shiver .chip{
      animation: chip-shiver-morandi 0.2s var(--ease-ui) 0s 1;
    }
    @keyframes chip-shiver-morandi{
      0%,100%{ transform: translateY(0) translateZ(0); }
      25%{ transform: translateY(-1px) translateZ(0); }
      75%{ transform: translateY(1px) translateZ(0); }
    }

    /* ---------- 10) 闲置12s后：极缓悬浮（9s循环） ---------- */
    .heroIdle{
      animation: idle-float-morandi 9s var(--ease-out) infinite;
    }
    @keyframes idle-float-morandi{
      0%,100%{ transform: translateY(0) translateZ(0); }
      50%{ transform: translateY(-4px) translateZ(0); }
    }

    /* ---------- 11) 返回顶部按钮：出现回弹 + 呼吸光环（伪元素，仅动transform/opacity） ---------- */
    .toTop{
      position: fixed;
      right: 18px;
      bottom: 18px;
      width: 46px;
      height: 46px;
      border-radius: 999px;
      border: 1px solid rgba(229,229,231,0.95);
      background: rgba(255,255,255,0.96);
      color: var(--text);
      font-weight: 800;
      cursor: pointer;

      opacity: 0;
      transform: scale(0) translateZ(0);
      pointer-events: none;

      box-shadow: var(--shadow-1);
      will-change: transform, opacity;
      contain: layout paint;
      outline:none;
      touch-action: manipulation;
      z-index: 60;
    }
    .toTop::before{
      /* 呼吸光环（模拟box-shadow变化，不直接动shadow） */
      content:"";
      position:absolute;
      inset:-8px;
      border-radius: 999px;
      background: radial-gradient(closest-side, rgba(141,163,185,0.20), transparent 70%);
      opacity: 0.0;
      transform: scale(0.9) translateZ(0);
      will-change: transform, opacity;
      pointer-events:none;
    }
    .toTop.is-show{
      pointer-events:auto;
      animation: toTop-in-elastic-morandi 0.4s var(--ease-in) forwards;
    }
    @keyframes toTop-in-elastic-morandi{
      0%{ opacity:0; transform: scale(0) translateZ(0); }
      70%{ opacity:1; transform: scale(1.05) translateZ(0); }
      100%{ opacity:1; transform: scale(1) translateZ(0); }
    }
    .toTop.is-show::before{
      animation: breathe-ring-morandi 3s var(--ease-ui) infinite;
    }
    @keyframes breathe-ring-morandi{
      0%,100%{ opacity: 0.25; transform: scale(0.96) translateZ(0); }
      50%{ opacity: 0.55; transform: scale(1.04) translateZ(0); }
    }
    .toTop:active{
      animation: press-elastic-morandi 0.3s var(--ease-ui) forwards;
    }

    /* ---------- 12) Footer ---------- */
    footer{
      margin-top: 18px;
      text-align:center;
      color: var(--text-3);
      font-size: 13px;
    }

    /* =========================================================
      ✅ Mobile Adaptation (<768px)
      - hover弱化（仅保留颜色变化）
      - 动效时长 -25%
      - 循环动效速度 -40%
      - 视差幅度减半/或关闭
      - 关闭复杂 3D / ripple（JS也会降级）
    ========================================================= */
    @media (max-width: 768px){
      :root{
        --dur-base: 0.30s;        /* 0.4 * 0.75 */
        --dur-complex: 0.68s;     /* 0.9 * 0.75 */
        --parallax-card: 1.5px;   /* 减半 */
        --parallax-text: 0.5px;   /* 减半 */
      }
      .card{ transform: translateY(12px) scale(0.92) rotateX(0deg) translateZ(0); } /* 关闭3D */
      .card::after{ display:none; } /* 简化遮罩 */

      /* 移动端取消hover位移/阴影，仅保留色值变化 */
      .card.hoverable{ transition: border-color var(--dur-base) var(--ease-ui); }
      .card.hoverable:hover{ transform: none; box-shadow: var(--shadow-1); border-color: rgba(141,163,185,0.18); }

      /* 循环动效降低 40%：chip gradient */
      .chip::before{ animation-duration: 16.8s; } /* 12 / (1-0.4) = 20? 这里更保守 16.8 */
      li.bullet::before{ animation-duration: 4.2s; } /* 3 / (1-0.4) */
      .toTop.is-show::before{ animation-duration: 5s; } /* 3 / (1-0.4) */

      /* 触摸反馈：scale 0.96→1.02→1（0.2s） */
      .pill:active, .chip:active, .navlink:active, .toTop:active{
        animation: touch-elastic-morandi 0.2s var(--ease-ui) forwards;
      }
      @keyframes touch-elastic-morandi{
        0%{ transform: scale(1) translateZ(0); }
        45%{ transform: scale(0.96) translateZ(0); }
        80%{ transform: scale(1.02) translateZ(0); }
        100%{ transform: scale(1) translateZ(0); }
      }
    }

    /* =========================================================
      ✅ prefers-reduced-motion
      - 关闭所有循环动效
      - 保留核心入场/交互的淡入淡出 + 微缩放
    ========================================================= */
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; }
      body{ opacity: 1; transform: none; }
      .card, .entry, .stagger, li.bullet{ opacity: 1 !important; transform:none !important; }
      .toTop{ display:none; }
    }
  </style>
</head>

<body>
  <div class="wrap" id="top">

    <!-- =========================================================
      Header / Topbar (极简顶栏)
    ========================================================= -->
    <header class="topbar" id="topbar">
      <div class="bar" role="navigation" aria-label="页面导航">
        <a class="navlink is-active" href="#top" data-nav="top">顶部</a>
        <a class="navlink" href="#edu" data-nav="edu">教育</a>
        <a class="navlink" href="#intern" data-nav="intern">实习</a>
        <a class="navlink" href="#proj" data-nav="proj">项目</a>
      </div>
    </header>

    <!-- =========================================================
      Main
    ========================================================= -->
    <main>

      <!-- 个人信息（优先级最高批次） -->
      <section class="card heroCard hoverable" id="hero" data-morandi-card>
        <div class="hero">
          <div class="heroLeft">
            <div class="avatarWrap">
              <!-- ✅ 头像位：把你的照片放在 assets/avatar.jpg -->
              <img class="avatar" id="avatarImg" src="assets/avatar.jpg" alt="陈亭伊 个人照片" />
              <!-- 图片加载失败时的降级占位（JS会自动切换显示） -->
              <div class="avatarFallback" id="avatarFallback" aria-hidden="true" style="display:none;">CTY</div>

              <div>
                <div class="name" id="nameBtn" tabindex="0" role="button" aria-label="点击触发彩蛋">陈亭伊</div>
                <div class="metaLine stagger" data-stagger>
                  <a href="tel:18723250436">18723250436</a>
                  <span class="weak">｜</span>
                  <a href="mailto:cty007376@gmail.com">cty007376@gmail.com</a>
                  <span class="weak">｜</span>
                  女 <span class="weak">｜</span> 籍贯：重庆
                </div>
              </div>
            </div>

            <div class="metaLine stagger" data-stagger>
              工作经验：2年 ｜ 求职意向：运营、策划、增长 ｜ 期望城市：北京/唐山
            </div>

            <div class="chips stagger" data-stagger id="chips">
              <button class="chip" type="button"><span>运营</span></button>
              <button class="chip" type="button"><span>策划</span></button>
              <button class="chip" type="button"><span>增长</span></button>
            </div>
          </div>

          <div class="heroRight">
            <div class="pill stagger" data-stagger tabindex="0">
              <strong>电话</strong><span><a href="tel:18723250436">点击拨号</a></span>
            </div>
            <div class="pill stagger" data-stagger tabindex="0">
              <strong>邮箱</strong><span><a href="mailto:cty007376@gmail.com">点击发送</a></span>
            </div>
            <div class="pill stagger" data-stagger tabindex="0">
              <strong>打印</strong><span>可直接打印为 PDF</span>
            </div>
          </div>
        </div>
      </section>

      <!-- 教育经历 -->
      <section class="card hoverable" id="edu" data-morandi-card>
        <div class="sectionTitle">
          <div class="sectionTitleWrap">
            <span class="glow" aria-hidden="true"></span>
            <div class="sectionBar" aria-hidden="true"></div>
            <h2>教育经历</h2>
          </div>
        </div>

        <article class="entry" data-entry>
          <div class="row">
            <div class="left">中央民族大学「985A类双一流院校」</div>
            <div class="mid">本科｜网络与新媒体</div>
            <div class="right">2023-2027</div>
          </div>
          <div class="subline">CET-4、CRT-6、国家人才英语中级、普通话二甲</div>
        </article>
      </section>

      <!-- 实习经历 -->
      <section class="card hoverable" id="intern" data-morandi-card>
        <div class="sectionTitle">
          <div class="sectionTitleWrap">
            <span class="glow" aria-hidden="true"></span>
            <div class="sectionBar" aria-hidden="true"></div>
            <h2>实习经历</h2>
          </div>
        </div>

        <article class="entry" data-entry>
          <div class="row">
            <div class="left">北京梧桐花开科技有限公司</div>
            <div class="mid">新媒体运营及策划</div>
            <div class="right">2025.09-2026.01</div>
          </div>
          <ul class="bullets">
            <li class="bullet" data-bullet>流量策划：热榜制作独立完成全流程任务；优化热榜逻辑，提升内容精准度，助力流量分发效率提升。</li>
            <li class="bullet" data-bullet>数据统计分析：完成近 <span class="num" data-num="30">30</span> 位财经博主数据全维度统计，输出覆盖产出、传播数据的分析报告；拆解教育、情感等 3 个领域抖音博主爆款逻辑，总结选题方向与内容结构，为增长选题提供参考。</li>
            <li class="bullet" data-bullet>优化：参与完善支付宝电鳗平台分发 SOP，补充关键操作节点；整理任务错误统计表，为降低运营失误、提升效率提供数据支撑。</li>
          </ul>
        </article>

        <article class="entry" data-entry>
          <div class="row">
            <div class="left">北京蒸汽记忆公司</div>
            <div class="mid">产品运营</div>
            <div class="right">2025.06-2025.09</div>
          </div>
          <ul class="bullets">
            <li class="bullet" data-bullet>审核生态监控：牵头完成 Slack、Zendesk 等 <span class="num" data-num="12">12</span> 个第三方平台 OAuth 接入，建立“资料模板 + 审核清单 + 回调校验”SOP，实现平均审核时长 6 天、一次通过率 <span class="num" data-num="85%">85%</span>。</li>
            <li class="bullet" data-bullet>增长与产品优化：上线新手引导及激活任务，补齐权限/令牌过期提示、错误态回写等细节；搭建注册、首日激活、7/30 日留存等指标口径，每两周复盘渠道与版本表现，5 个月内实现 MAU+<span class="num" data-num="20%">20%</span>、新增注册 +<span class="num" data-num="27%">27%</span>、首日激活率 <span class="num" data-num="38%">38%</span>、7 日留存 <span class="num" data-num="24%">24%</span>。</li>
            <li class="bullet" data-bullet>GTM/对外：策划执行清华、北大等 6 场高校推介会，统筹讲稿、Demo 等物料，累计到场 <span class="num" data-num="1100+">1100+</span>、意向 <span class="num" data-num="420">420</span>、当场注册 <span class="num" data-num="230">230</span>；输出中英双语 ONE-PAGER、FAQ、集成白皮书，支撑 BD 外联与官网转化；对接海外开发者/伙伴 <span class="num" data-num="100+">100+</span> 场会议，促成 <span class="num" data-num="32">32</span> 家试用、<span class="num" data-num="10">10</span> 家 PoC、<span class="num" data-num="3">3</span> 家长期合作。</li>
            <li class="bullet" data-bullet>招聘优化：（投递-筛选-约面-反馈），将面试周期压缩至 <span class="num" data-num="7">7</span> 天，沉淀面试题库与候选人标签规则。</li>
          </ul>
        </article>

        <article class="entry" data-entry>
          <div class="row">
            <div class="left">奇迹创坛</div>
            <div class="mid">人才调研</div>
            <div class="right">2025.01-2025.05</div>
          </div>
          <ul class="bullets">
            <li class="bullet" data-bullet>数据标注、数据清洗：收集与结构化 <span class="num" data-num="20000+">20,000+</span> 条目标人才数据，完成去重与字段统一；系统化上传 100% 完成。</li>
            <li class="bullet" data-bullet>建联人才：基于需求画像，锁定并触达 <span class="num" data-num="500+">500+</span> 高潜候选人，达成合作 <span class="num" data-num="50+">50+</span>；沉淀“人才 mapping”SOP，支持半导体与海外医疗等跨部门项目。</li>
            <li class="bullet" data-bullet>负责薪资与标签的可视化标注与抽样校验，保障数据标注一致性 ≥<span class="num" data-num="97%">97%</span>、抽检错误率 ≤<span class="num" data-num="3%">3%</span>。</li>
          </ul>
        </article>

        <article class="entry" data-entry style="margin-bottom:0;">
          <div class="row">
            <div class="left">爱阅-英语教培机构</div>
            <div class="mid">英语教师</div>
            <div class="right">2024.09-2024.12</div>
          </div>
          <ul class="bullets">
            <li class="bullet" data-bullet>负责6-16岁学生英语阶段性课程教学，设计趣味课堂活动（如情景对话、英文游戏）；策划并执行“万圣节英语派对”活动参与人数超 <span class="num" data-num="200+">200+</span> 人，获家长满意度 <span class="num" data-num="100%">100%</span>。</li>
            <li class="bullet" data-bullet>所带班级学员英语成绩平均提升 <span class="num" data-num="25%">25%</span>，续课率达 <span class="num" data-num="90%">90%</span>。</li>
          </ul>
        </article>
      </section>

      <!-- 项目经历 -->
      <section class="card hoverable" id="proj" data-morandi-card>
        <div class="sectionTitle">
          <div class="sectionTitleWrap">
            <span class="glow" aria-hidden="true"></span>
            <div class="sectionBar" aria-hidden="true"></div>
            <h2>项目经历</h2>
          </div>
        </div>

        <article class="entry" data-entry>
          <div class="row">
            <div class="left">中国移动创客比赛-颜探网页开发二等奖</div>
            <div class="mid">网页开发</div>
            <div class="right">2024.10-2024.12</div>
          </div>
        </article>

        <article class="entry" data-entry>
          <div class="row">
            <div class="left">NCDA未来设计师大赛北京市三等奖</div>
            <div class="mid">摄影 / 后期剪辑 / 脚本构思</div>
            <div class="right">2025.03-至今</div>
          </div>
        </article>

        <article class="entry" data-entry style="margin-bottom:0;">
          <div class="row">
            <div class="left">新媒体视域下少数民族非遗文化的创新传播与立法传承——以回族民谣文化为例</div>
            <div class="mid">队长</div>
            <div class="right">2023.10-2024.05</div>
          </div>
          <div class="subline">
            从内容策划到制作，数据分析到运营推广我都有了一定的理论基础和扎实的实践经验。项目编号：QMRP2023110913
          </div>
        </article>

        <footer>
          © 2026 陈亭伊｜运营 / 策划 / 增长｜期望城市：北京/唐山
        </footer>
      </section>

    </main>

    <!-- 返回顶部按钮 -->
    <button class="toTop" id="toTop" aria-label="返回顶部">↑</button>
  </div>

  <script>
    /* =========================================================
      #morandi-animation — 动效核心逻辑（JS）
      架构：MorandiAnimation 类
      - 懒加载：IntersectionObserver（阈值 35%）
      - 滚动：节流(16ms) + 防抖（顶栏 / toTop / parallax）
      - 数字计数：弹性计数 1.8s + 逐位弹动 + 结束脉冲
      - 性能检测：低性能设备自动降级（关闭视差/逐位动画/复杂彩蛋）
      - 移动端降级：关闭 3D / ripple 等复杂动效
    ========================================================= */

    class MorandiAnimation {
      constructor(){
        this.isMobile = window.matchMedia('(max-width: 768px)').matches;
        this.reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        // 性能检测（低性能降级）
        const cores = navigator.hardwareConcurrency || 4;
        const mem = navigator.deviceMemory || 4;
        this.lowPerf = (cores <= 4 && mem <= 4); // 保守策略

        // 仅桌面 + 非低性能 + 非reduce-motion 开启视差
        this.enableParallax = (!this.isMobile && !this.lowPerf && !this.reduceMotion);

        this.topbar = document.getElementById('topbar');
        this.toTop = document.getElementById('toTop');
        this.hero = document.getElementById('hero');

        this.navLinks = Array.from(document.querySelectorAll('.navlink'));
        this.cards = Array.from(document.querySelectorAll('[data-morandi-card]'));
        this.entries = Array.from(document.querySelectorAll('[data-entry]'));
        this.bullets = Array.from(document.querySelectorAll('[data-bullet]'));
        this.nums = Array.from(document.querySelectorAll('.num[data-num]'));

        // hero stagger lines (批次内逐行入场)
        this.staggers = Array.from(document.querySelectorAll('[data-stagger]'));

        // idle
        this.idleTimer = null;
        this.idleActive = false;

        // parallax state
        this.lastY = window.scrollY;
        this.vel = 0;
        this.rafId = null;

        this.init();
      }

      init(){
        this.handleAvatarFallback();
        this.initHeroBatchIn();
        this.initCardObserver();
        this.initSectionHighlight();
        this.initNavAndScroll();
        this.initToTop();
        this.initCardPressFeedback();
        this.initNameEasterEgg();
        this.initIdleFloat();

        if(this.enableParallax){
          this.initParallax();
        }
      }

      /* ---------- 头像加载失败降级 ---------- */
      handleAvatarFallback(){
        const img = document.getElementById('avatarImg');
        const fb = document.getElementById('avatarFallback');
        if(!img || !fb) return;

        img.addEventListener('error', ()=>{
          img.style.display = 'none';
          fb.style.display = 'flex';
        }, { once:true });
      }

      /* ---------- 全局批次入场：个人信息→求职意向(标签/右侧pill)→后续由Observer ---------- */
      initHeroBatchIn(){
        if(this.reduceMotion){
          // 直接显示
          this.staggers.forEach(el=>{
            el.classList.add('is-in');
            el.style.opacity = 1;
            el.style.transform = 'none';
          });
          return;
        }

        // 批次间隔 0.2s，同批次逐行 0.07s
        const baseDelay = 0.25; // heroCard自身动画开始后稍等
        this.staggers.forEach((el, idx)=>{
          el.style.animationDelay = `${baseDelay + idx * 0.07}s`;
          el.classList.add('stagger');
          // stagger 动画触发
          requestAnimationFrame(()=> el.classList.add('is-in'));
        });
      }

      /* ---------- 懒加载：卡片阈值 35% 入场，entry/li 逐级延迟 ---------- */
      initCardObserver(){
        if(this.reduceMotion){
          this.cards.forEach(c=>c.classList.add('is-in'));
          this.entries.forEach(e=>e.classList.add('is-in'));
          this.bullets.forEach(b=>b.classList.add('is-in'));
          return;
        }

        const io = new IntersectionObserver((entries)=>{
          entries.forEach(en=>{
            if(!en.isIntersecting) return;

            const card = en.target;
            card.classList.add('is-in');

            // 卡片内 entry 逐个出现：0.2s 批次间隔的视觉感
            const innerEntries = Array.from(card.querySelectorAll('[data-entry]'));
            innerEntries.forEach((entryEl, i)=>{
              entryEl.style.animationDelay = `${0.10 + i * 0.10}s`;
              entryEl.classList.add('is-in');

              // 同 entry 内 bullet 逐行 0.07s 阶梯式入场
              const lis = Array.from(entryEl.querySelectorAll('[data-bullet]'));
              lis.forEach((li, j)=>{
                li.style.animationDelay = `${0.18 + j * 0.07}s`;
                li.classList.add('is-in');
              });
            });

            // 数字计数（只在卡片首次进入触发）
            const nums = Array.from(card.querySelectorAll('.num[data-num]'));
            nums.forEach(n => this.animateNumberOnce(n));

            io.unobserve(card);
          });
        }, { threshold: 0.35 });

        this.cards.forEach(c=>io.observe(c));
      }

      /* ---------- 标题滚动高亮（进入视口顶部时加柔光） ---------- */
      initSectionHighlight(){
        if(this.reduceMotion) return;

        const targets = Array.from(document.querySelectorAll('.sectionTitleWrap'));
        const map = new Map(targets.map(w=>[w.closest('.card')?.id, w]));

        const io = new IntersectionObserver((entries)=>{
          entries.forEach(en=>{
            const id = en.target.id;
            const wrap = map.get(id);
            if(!wrap) return;
            if(en.isIntersecting) wrap.classList.add('is-hot');
            else wrap.classList.remove('is-hot');
          });
        }, { threshold: 0.55 });

        ['edu','intern','proj'].forEach(id=>{
          const el = document.getElementById(id);
          if(el) io.observe(el);
        });
      }

      /* ---------- 顶栏 & 返回顶部显示：节流(16ms) ---------- */
      initNavAndScroll(){
        const onScroll = this.throttle(()=>{
          const y = window.scrollY || document.documentElement.scrollTop;
          // 顶栏背景：>100px 显示
          this.topbar.classList.toggle('is-scrolled', y > 100);

          // toTop：>300px 显示
          this.toTop.classList.toggle('is-show', y > 300);
        }, 16);

        window.addEventListener('scroll', onScroll, { passive:true });

        // section 高亮
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(en=>{
            if(!en.isIntersecting) return;
            const id = en.target.id;
            this.navLinks.forEach(a=>a.classList.remove('is-active'));
            const hit = this.navLinks.find(a => a.getAttribute('href') === `#${id}`);
            if(hit) hit.classList.add('is-active');
          });
        }, { threshold: 0.55 });

        ['edu','intern','proj'].forEach(id=>{
          const el = document.getElementById(id);
          if(el) io.observe(el);
        });
      }

      /* ---------- 返回顶部 ---------- */
      initToTop(){
        this.toTop.addEventListener('click', ()=>{
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      /* ---------- 卡片点击按压反馈（只加class，不做复杂计算） ---------- */
      initCardPressFeedback(){
        this.cards.forEach(card=>{
          card.addEventListener('pointerdown', ()=>{
            card.classList.remove('press');
            void card.offsetWidth;
            card.classList.add('press');
          }, { passive:true });

          card.addEventListener('animationend', ()=>{
            card.classList.remove('press');
          });
        });
      }

      /* ---------- 数字弹性计数：1.8s + 逐位弹动 + 完成脉冲 ---------- */
      animateNumberOnce(el){
        if(el.dataset.counted === '1') return;
        el.dataset.counted = '1';

        // 低性能 / 移动端：降级为“简单计数”（不拆分digit）
        const simple = (this.lowPerf || this.isMobile);

        const raw = (el.dataset.num || el.textContent || '').trim();
        const meta = this.parseNum(raw);

        const duration = 1800; // 1.8s
        const start = performance.now();
        let lastText = '';

        el.classList.add('is-counting');

        const tick = (now)=>{
          const t = Math.min(1, (now - start) / duration);

          // 弹性计数（阻尼感）：easeOutBack-ish（自写，避免引库）
          const eased = this.easeOutElasticLite(t);

          const val = meta.num * eased;
          const txt = this.formatNum(val, meta);

          if(txt !== lastText){
            if(simple){
              el.textContent = txt;
            }else{
              this.renderDigits(el, txt);
            }
            lastText = txt;
          }

          if(t < 1){
            requestAnimationFrame(tick);
          }else{
            // 结束：还原最终格式（避免千分位误差）
            if(simple) el.textContent = meta.raw;
            else this.renderDigits(el, meta.raw);

            el.classList.remove('is-counting');
            el.classList.add('pulse');
            el.addEventListener('animationend', ()=> el.classList.remove('pulse'), { once:true });
          }
        };

        requestAnimationFrame(tick);
      }

      parseNum(str){
        const raw = String(str);
        const hasPct = raw.includes('%');
        const hasPlus = raw.includes('+');
        const hasComma = raw.includes(',');

        const num = parseFloat(raw.replace(/,/g,'').replace('%','').replace('+','')) || 0;

        return { raw, num, hasPct, hasPlus, hasComma };
      }

      formatNum(v, meta){
        let n = Math.round(v);
        let out = meta.hasComma ? n.toLocaleString('en-US') : String(n);
        if(meta.hasPct) out += '%';
        if(meta.hasPlus) out += '+';
        return out;
      }

      renderDigits(el, txt){
        // 逐位弹动：每次重建 digit（数量不多，持续1.8s可接受）
        el.innerHTML = '';
        const chars = String(txt).split('');
        chars.forEach(ch=>{
          const span = document.createElement('span');
          span.className = 'digit pop';
          span.textContent = ch;
          el.appendChild(span);
          span.addEventListener('animationend', ()=> span.classList.remove('pop'), { once:true });
        });
      }

      // 轻量弹性（不夸张，不抢焦点）
      easeOutElasticLite(t){
        if(t === 0) return 0;
        if(t === 1) return 1;
        // 类“回弹”效果：强度控制在<=30%
        const p = 0.32;
        return Math.pow(2, -10 * t) * Math.sin((t - p / 4) * (2 * Math.PI) / p) + 1;
      }

      /* ---------- 姓名彩蛋：桌面端完整五层；移动端降级 ---------- */
      initNameEasterEgg(){
        const btn = document.getElementById('nameBtn');
        const chips = document.getElementById('chips');
        if(!btn) return;

        let used = false;

        const trigger = ()=>{
          if(used) return;
          used = true;

          // 1) 文字rotate+scale
          btn.classList.remove('pop');
          void btn.offsetWidth;
          btn.classList.add('pop');

          // 4) 描边短暂出现
          btn.classList.add('stroke');
          setTimeout(()=> btn.classList.remove('stroke'), 300);

          // 3) Hero背景柔光闪
          const flash = document.createElement('div');
          flash.className = 'flash';
          this.hero.appendChild(flash);
          flash.addEventListener('animationend', ()=> flash.remove(), { once:true });

          // 5) 周边标签同步微振
          if(chips){
            chips.classList.add('shiver');
            setTimeout(()=> chips.classList.remove('shiver'), 220);
          }

          // 2) 3圈波纹（移动端/低性能降级：不生成）
          if(this.isMobile || this.lowPerf || this.reduceMotion) return;

          const rect = btn.getBoundingClientRect();
          const cx = rect.left + rect.width/2 + window.scrollX;
          const cy = rect.top + rect.height/2 + window.scrollY;

          [1.0, 1.35, 1.7].forEach((k, idx)=>{
            const r = document.createElement('div');
            r.className = 'ripple';
            const size = Math.max(rect.width, rect.height) * 2.2 * k;
            r.style.width = size + 'px';
            r.style.height = size + 'px';
            r.style.left = cx + 'px';
            r.style.top = cy + 'px';
            r.style.animationDelay = (idx * 0.08) + 's';
            document.body.appendChild(r);
            r.addEventListener('animationend', ()=> r.remove(), { once:true });
          });
        };

        btn.addEventListener('click', trigger);
        btn.addEventListener('keydown', (e)=>{
          if(e.key === 'Enter' || e.key === ' ') trigger();
        });
      }

      /* ---------- 闲置12s：hero慢悬浮；交互即停止并归位 ---------- */
      initIdleFloat(){
        if(this.isMobile || this.lowPerf || this.reduceMotion) return;

        const reset = ()=>{
          if(this.idleTimer) clearTimeout(this.idleTimer);
          if(this.idleActive){
            this.hero.classList.remove('heroIdle');
            this.idleActive = false;
          }
          this.idleTimer = setTimeout(()=>{
            this.hero.classList.add('heroIdle');
            this.idleActive = true;
          }, 12000);
        };

        ['mousemove','scroll','keydown','pointerdown','touchstart'].forEach(evt=>{
          window.addEventListener(evt, reset, { passive:true });
        });

        reset();
      }

      /* ---------- 视差：仅桌面高性能启用；滚动速度驱动微位移 ---------- */
      initParallax(){
        const textTargets = Array.from(document.querySelectorAll('.left, .mid, .right, .subline, .metaLine'));
        const cardTargets = this.cards;

        const loop = ()=>{
          const y = window.scrollY || 0;
          const dy = y - this.lastY;
          this.lastY = y;

          // 速度阻尼
          this.vel = this.vel * 0.86 + dy * 0.14;

          const v = Math.max(-50, Math.min(50, this.vel));

          // 卡片反向微位移（±3px）
          const cy = Math.max(-this.cssPx('--parallax-card'), Math.min(this.cssPx('--parallax-card'), -v * 0.06));
          // 文字正向微位移（±1px）
          const tx = Math.max(-this.cssPx('--parallax-text'), Math.min(this.cssPx('--parallax-text'), v * 0.02));

          cardTargets.forEach(c=>{
            // 不覆盖入场transform：只加一层 translateZ(0) 的微位移（使用CSS变量更安全）
            c.style.setProperty('--py', cy + 'px');
            c.style.transform = c.style.transform.replace(/translateY\([^)]*\)/, `translateY(${16}px)`);
            // 用更安全方式：给卡片加内层容器会更干净，但这里不破坏结构，改为设置一个“额外位移”的CSS变量
          });

          // 更稳：只给可见区域文字加微位移（这里简化处理）
          textTargets.forEach(t=>{
            t.style.transform = `translateX(${tx}px) translateZ(0)`;
            t.style.willChange = 'transform';
          });

          this.rafId = requestAnimationFrame(loop);
        };

        // 不要一直跑：只有滚动时启动，停下来自动结束（防抖）
        let stopTimer = null;
        const onScroll = this.throttle(()=>{
          if(!this.rafId) this.rafId = requestAnimationFrame(loop);
          if(stopTimer) clearTimeout(stopTimer);
          stopTimer = setTimeout(()=>{
            if(this.rafId){
              cancelAnimationFrame(this.rafId);
              this.rafId = null;
            }
          }, 200);
        }, 16);

        window.addEventListener('scroll', onScroll, { passive:true });
      }

      cssPx(varName){
        const v = getComputedStyle(document.documentElement).getPropertyValue(varName).trim();
        return parseFloat(v.replace('px','')) || 0;
      }

      /* ---------- 工具：节流 / 防抖 ---------- */
      throttle(fn, wait=16){
        let last = 0;
        let timer = null;
        return (...args)=>{
          const now = performance.now();
          if(now - last >= wait){
            last = now;
            fn(...args);
          }else if(!timer){
            timer = setTimeout(()=>{
              timer = null;
              last = performance.now();
              fn(...args);
            }, wait - (now - last));
          }
        };
      }
    }

    // 初始化
    new MorandiAnimation();
  </script>
</body>
</html>
